"use strict";(()=>{var e={};e.id=360,e.ids=[360],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7360:e=>{e.exports=require("url")},6544:e=>{e.exports=import("node-fetch")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},5806:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{config:()=>l,default:()=>u,routeModule:()=>p});var n=o(1802),i=o(7153),a=o(6249),d=o(7277),s=e([d]);d=(s.then?(await s)():s)[0];let u=(0,a.l)(d,"default"),l=(0,a.l)(d,"config"),p=new n.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/download-video",pathname:"/api/download-video",bundlePath:"",filename:""},userland:d});r()}catch(e){r(e)}})},7277:(e,t,o)=>{o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{default:()=>d});var n=o(6544),i=o(7360),a=e([n]);async function d(e,t){if("POST"!==e.method)return t.setHeader("Allow",["POST"]),t.status(405).end(`Method ${e.method} Not Allowed`);let{videoUrl:o}=e.body;if(!o||"string"!=typeof o)return t.status(400).json({error:"Video URL is required."});try{let e=await (0,n.default)(o);if(!e.ok)throw Error(`Failed to fetch video: ${e.statusText}`);let r=e.headers.get("content-type")||"video/mp4",a=e.headers.get("content-disposition"),d=new i.URL(o).pathname.split("/").pop()||"video.mp4";if(t.setHeader("Content-Type",r),a?t.setHeader("Content-Disposition",a):t.setHeader("Content-Disposition",`attachment; filename="${d}"`),e.body)e.body.pipe(t);else throw Error("Video response body is null")}catch(e){console.error("Error downloading video:",e),t.headersSent||t.status(500).json({error:"Failed to download video."})}}n=(a.then?(await a)():a)[0],r()}catch(e){r(e)}})},7153:(e,t)=>{var o;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},1802:(e,t,o)=>{e.exports=o(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=5806);module.exports=o})();